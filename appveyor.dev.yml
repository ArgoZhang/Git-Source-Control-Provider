
majorVersion : 1
minorVersion : 5
patchVersion : 0

version: {majorVersion}.{minorVersion}.{patchVersion}.{build}-dev

os: Previous Visual Studio 2015 RC

configuration: Release

install:

- ps: >-

    (new-object Net.WebClient).DownloadString("https://raw.github.com/madskristensen/ExtensionScripts/master/AppVeyor/vsix.ps1") | iex





    git submodule -q update --init

before_build:

- ps: >-

      $vsixPath = "source.extension.vsixmanifest"


    $manifestXml = New-Object XML

    $manifestXml.Load($vsixPath)

    $manifestXml.PackageManifest.Metadata.Identity.Version = {version}

    $manifestXml.save($manifestPath)

build_script:
  - nuget restore -Verbosity quiet
  - msbuild /p:configuration=Release /p:DeployExtension=false /p:ZipPackageCompressionLevel=normal /v:m

test: off

artifacts:

- path: GitSccProvider\bin\Release\GitSccProvider.vsix

  name: GitSccProvider


deploy:
  release: GSCP Dev-v{majorVersion}.{minorVersion}
  description: GSCP Dev Build -v$(appveyor_build_version)
  provider: GitHub
  auth_token:
    secure: D9+WTOpCzI8qcrBNULSrWHJeR4thDu4jxQmY/oHux1CYpAjfk2rrpShn8loWHGQc # your encrypted token from GitHub
  artifact: GitSccProvider\bin\Release\GitSccProvider.vsix           # upload all NuGet packages to release assets
  draft: false
  prerelease: true
  on:
    branch: dev                 # release from master branch only
    appveyor_repo_tag: true        # deploy on tag push only